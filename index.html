<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Payment Allocation App&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.input-group {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.input-field {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #D1D5DB;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.input-field:focus {</p>
<p class="p1"><span class="Apple-converted-space">            </span>outline: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-color: #4F46E5;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: all 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-primary {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #4F46E5;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-primary:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #4338CA;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-secondary {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #E5E7EB;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #374151;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-secondary:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #D1D5DB;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.output-grid {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">            </span>grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.output-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #F9FAFB;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-left: 4px solid #4F46E5;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.output-item h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.875rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #6B7280;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0.25rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.output-item p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 1.25rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #11182C;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.log-table {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-collapse: collapse;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.log-table th, .log-table td {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: left;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-bottom: 1px solid #E5E7EB;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.log-table th {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #F9FAFB;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #374151;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.total-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ECFDF5;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #34D399;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-100 p-4 sm:p-6 lg:p-8"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="max-w-6xl mx-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;header class="text-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1 class="text-3xl sm:text-4xl font-bold text-gray-800"&gt;Payment Allocation App&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p class="text-gray-600 mt-2"&gt;Automatically track and split your business income.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="grid grid-cols-1 lg:grid-cols-3 gap-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="lg:col-span-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-xl font-bold mb-4 text-gray-700"&gt;Enter Payment Details&lt;/h2&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="input-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;label for="grossPayment" class="block text-sm font-medium text-gray-700 mb-1"&gt;Gross Payment Amount ($)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="number" id="grossPayment" class="input-field" placeholder="e.g., 550"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="input-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;label for="boostPhase" class="block text-sm font-medium text-gray-700 mb-1"&gt;Boost Phase Selector&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;select id="boostPhase" class="input-field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option value="long-term"&gt;Long-Term Boost&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option value="reserve"&gt;Reserve Boost&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option value="innovation-gear"&gt;Innovation–Gear Boost&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option value="no-boost"&gt;Even Split&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="input-group flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input id="includeBonus" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;label for="includeBonus" class="ml-2 block text-sm text-gray-900"&gt;Include Owner Pay Bonus?&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="calculateBtn" class="btn btn-primary w-full"&gt;Calculate &amp; Log&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="lg:col-span-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-xl font-bold mb-4 text-gray-700"&gt;Allocation Summary&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="outputSummary" class="output-grid"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-red-500"&gt;&lt;h3&gt;Tax Savings (25%)&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-blue-500"&gt;&lt;h3&gt;Business Checking (30%)&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-green-500"&gt;&lt;h3&gt;Total Owner Pay&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-indigo-500"&gt;&lt;h3&gt;Sub-Account Pool (10%)&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-yellow-400 col-span-full md:col-span-1"&gt;&lt;h3&gt;Tithe Reminder (10%)&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-purple-500"&gt;&lt;h3&gt;Reserve Savings&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-pink-500"&gt;&lt;h3&gt;Long-Term Savings&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="output-item border-teal-500"&gt;&lt;h3&gt;Innovation–Gear&lt;/h3&gt;&lt;p&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div id="totalAllocationSummary" class="total-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="mt-8 card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-between items-center mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-xl font-bold text-gray-700"&gt;Transaction Log&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="exportCsvBtn" class="btn btn-secondary mr-2"&gt;Export CSV&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button id="clearLogBtn" class="btn btn-secondary"&gt;Clear Log&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="overflow-x-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;table id="logTable" class="log-table"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Gross&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Boost Phase&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Owner Pay&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Tax&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Biz Checking&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Sub-Pool&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Long-Term&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Reserve&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Innovation&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;th&gt;Tithe Due&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const grossPaymentInput = document.getElementById('grossPayment');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const boostPhaseSelect = document.getElementById('boostPhase');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const includeBonusCheckbox = document.getElementById('includeBonus');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const calculateBtn = document.getElementById('calculateBtn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const outputSummary = document.getElementById('outputSummary');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const totalAllocationSummary = document.getElementById('totalAllocationSummary');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const logTableBody = document.querySelector('#logTable tbody');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const clearLogBtn = document.getElementById('clearLogBtn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const exportCsvBtn = document.getElementById('exportCsvBtn');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let transactionLog = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function formatCurrency(amount) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function calculateAllocation() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const gross = parseFloat(grossPaymentInput.value) || 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (gross &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>grossPaymentInput.focus();</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>const boostPhase = boostPhaseSelect.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const includeBonus = includeBonusCheckbox.checked;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- Corrected Allocation Logic ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>// These 4 categories are independent slices of gross income and sum to 100%.</p>
<p class="p1"><span class="Apple-converted-space">            </span>const tax = gross * 0.25;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const bizChecking = gross * 0.30;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const ownerBase = gross * 0.35;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const subPool = gross * 0.10;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Tithe is calculated for the bonus but is treated as a separate expense.</p>
<p class="p1"><span class="Apple-converted-space">            </span>const tithe = gross * 0.10;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const titheBonus = includeBonus ? tithe * 0.5 : 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const ownerPayTotal = ownerBase + titheBonus;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Boost Phase Logic for the Sub-Account Pool</p>
<p class="p1"><span class="Apple-converted-space">            </span>let longTerm, reserve, innovationGear;</p>
<p class="p1"><span class="Apple-converted-space">            </span>switch (boostPhase) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>case 'long-term':</p>
<p class="p1"><span class="Apple-converted-space">                    </span>longTerm = subPool * 0.77;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>reserve = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>innovationGear = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                </span>case 'reserve':</p>
<p class="p1"><span class="Apple-converted-space">                    </span>reserve = subPool * 0.77;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>longTerm = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>innovationGear = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                </span>case 'innovation-gear':</p>
<p class="p1"><span class="Apple-converted-space">                    </span>innovationGear = subPool * 0.77;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>reserve = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>longTerm = subPool * 0.115;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                </span>case 'no-boost':</p>
<p class="p1"><span class="Apple-converted-space">                    </span>longTerm = reserve = innovationGear = subPool / 3;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const results = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>gross,</p>
<p class="p1"><span class="Apple-converted-space">                </span>boostPhase: boostPhaseSelect.options[boostPhaseSelect.selectedIndex].text,</p>
<p class="p1"><span class="Apple-converted-space">                </span>tithe,</p>
<p class="p1"><span class="Apple-converted-space">                </span>ownerPayTotal,</p>
<p class="p1"><span class="Apple-converted-space">                </span>tax,</p>
<p class="p1"><span class="Apple-converted-space">                </span>bizChecking,</p>
<p class="p1"><span class="Apple-converted-space">                </span>subPool,</p>
<p class="p1"><span class="Apple-converted-space">                </span>reserve,</p>
<p class="p1"><span class="Apple-converted-space">                </span>longTerm,</p>
<p class="p1"><span class="Apple-converted-space">                </span>innovationGear</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>displayResults(results);</p>
<p class="p1"><span class="Apple-converted-space">            </span>logTransaction(results);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function displayResults(data) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Verify that the main allocations (excluding the separate tithe bonus) add up to 100% of gross.</p>
<p class="p1"><span class="Apple-converted-space">            </span>const ownerBase = data.ownerPayTotal - (includeBonusCheckbox.checked ? data.tithe * 0.5 : 0);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalAllocations = data.tax + data.bizChecking + ownerBase + data.subPool;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>outputSummary.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-red-500"&gt;&lt;h3&gt;Tax Savings (25%)&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.tax)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-blue-500"&gt;&lt;h3&gt;Business Checking (30%)&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.bizChecking)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-green-500"&gt;&lt;h3&gt;Total Owner Pay&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.ownerPayTotal)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-indigo-500"&gt;&lt;h3&gt;Sub-Account Pool (10%)&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.subPool)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-yellow-400 col-span-full md:col-span-1"&gt;&lt;h3&gt;Tithe Reminder (10%)&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.tithe)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-purple-500"&gt;&lt;h3&gt;Reserve Savings&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.reserve)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-pink-500"&gt;&lt;h3&gt;Long-Term Savings&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.longTerm)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="output-item border-teal-500"&gt;&lt;h3&gt;Innovation–Gear&lt;/h3&gt;&lt;p&gt;${formatCurrency(data.innovationGear)}&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>totalAllocationSummary.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-lg font-bold text-green-800"&gt;Total Distributed: ${formatCurrency(totalAllocations)}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-green-700"&gt;This correctly represents 100% of the gross payment.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function logTransaction(data) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transactionLog.unshift(data);</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderLog();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function renderLog() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>logTableBody.innerHTML = transactionLog.map(log =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.gross)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${log.boostPhase}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.ownerPayTotal)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.tax)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.bizChecking)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.subPool)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.longTerm)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.reserve)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.innovationGear)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;td&gt;${formatCurrency(log.tithe)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/tr&gt;`).join('');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>function clearLog() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (window.confirm('Are you sure you want to clear the entire transaction log?')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>transactionLog = [];</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderLog();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function exportToCsv() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (transactionLog.length === 0) { return; }</p>
<p class="p1"><span class="Apple-converted-space">            </span>const headers = ['Gross', 'Boost Phase', 'Total Owner Pay', 'Tax', 'Biz Checking', 'Sub-Pool', 'Long-Term', 'Reserve', 'Innovation', 'Tithe Due'];</p>
<p class="p1"><span class="Apple-converted-space">            </span>const rows = transactionLog.map(log =&gt; [log.gross, log.boostPhase, log.ownerPayTotal, log.tax, log.bizChecking, log.subPool, log.longTerm, log.reserve, log.innovationGear, log.tithe]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let csvContent = "data:text/csv;charset=utf-8," + headers.join(",") + "\n" + rows.map(e =&gt; e.join(",")).join("\n");</p>
<p class="p1"><span class="Apple-converted-space">            </span>const encodedUri = encodeURI(csvContent);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const link = document.createElement("a");</p>
<p class="p1"><span class="Apple-converted-space">            </span>link.setAttribute("href", encodedUri);</p>
<p class="p1"><span class="Apple-converted-space">            </span>link.setAttribute("download", "payment_allocations.csv");</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.body.appendChild(link);</p>
<p class="p1"><span class="Apple-converted-space">            </span>link.click();</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.body.removeChild(link);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>calculateBtn.addEventListener('click', calculateAllocation);</p>
<p class="p1"><span class="Apple-converted-space">        </span>clearLogBtn.addEventListener('click', clearLog);</p>
<p class="p1"><span class="Apple-converted-space">        </span>exportCsvBtn.addEventListener('click', exportToCsv);</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
